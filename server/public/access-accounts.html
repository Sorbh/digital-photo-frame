<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Access Accounts - Digital Photo Frame Admin</title>
    <link rel="stylesheet" href="admin.css">
    <link rel="stylesheet" href="access-accounts.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <div class="app">
        <header class="toolbar">
            <div class="toolbar-left">
                <button id="backBtn" class="btn-icon" title="Back to Admin">
                    <span class="material-icons">arrow_back</span>
                </button>
                <h1 class="app-title">Access Accounts</h1>
            </div>
            <div class="toolbar-right">
                <button id="createAccountBtn" class="btn-primary" title="Create Account">
                    <span class="material-icons">person_add</span>
                    New Account
                </button>
            </div>
        </header>

        <main class="main-content">
            <div class="accounts-container">
                <div id="loadingState" class="loading-state">
                    <span class="material-icons">hourglass_empty</span>
                    <p>Loading accounts...</p>
                </div>

                <div id="accountsList" class="accounts-list hidden">
                    <!-- Accounts will be populated here -->
                </div>

                <div id="emptyState" class="empty-state hidden">
                    <span class="material-icons">group</span>
                    <h3>No access accounts yet</h3>
                    <p>Create an account to get started</p>
                </div>
            </div>
        </main>

        <!-- Create/Edit Account Modal -->
        <div id="accountModal" class="modal hidden">
            <div class="modal-content large">
                <h2 id="modalTitle">Create Access Account</h2>
                
                <form id="accountForm" class="account-form">
                    <div class="form-section">
                        <h3>Account Details</h3>
                        <div class="form-group">
                            <label for="accountName">Account Name</label>
                            <input type="text" id="accountName" name="name" required maxlength="50" 
                                   placeholder="e.g. Family Photos">
                            <span class="error-message" id="nameError"></span>
                        </div>
                        
                        <div class="form-group">
                            <label for="accountPin">PIN Code</label>
                            <input type="text" id="accountPin" name="pin" required pattern="[0-9]{4,6}" 
                                   placeholder="4-6 digit PIN" maxlength="6">
                            <span class="error-message" id="pinError"></span>
                            <small class="form-help">4-6 digits, must be unique</small>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Folder Access</h3>
                        <div class="folder-grid-container">
                            <div id="loadingFolders" class="loading-folders">
                                <span class="material-icons">folder</span>
                                <p>Loading folders...</p>
                            </div>
                            <div id="folderGrid" class="folder-grid hidden">
                                <!-- Folder checkboxes will be populated here -->
                            </div>
                        </div>
                    </div>
                </form>

                <div class="modal-actions">
                    <button id="cancelAccountBtn" class="btn-secondary">Cancel</button>
                    <button id="saveAccountBtn" class="btn-primary" type="submit" form="accountForm">
                        <span class="material-icons">save</span>
                        Save Account
                    </button>
                </div>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div id="deleteModal" class="modal hidden">
            <div class="modal-content">
                <h2>Delete Account</h2>
                <p>Are you sure you want to delete <strong id="deleteAccountName"></strong>?</p>
                <p class="delete-warning">This action cannot be undone.</p>
                <div class="modal-actions">
                    <button id="cancelDeleteBtn" class="btn-secondary">Cancel</button>
                    <button id="confirmDeleteBtn" class="btn-danger">
                        <span class="material-icons">delete</span>
                        Delete Account
                    </button>
                </div>
            </div>
        </div>

        <!-- Toast notifications -->
        <div id="toastContainer" class="toast-container"></div>
    </div>

    <script src="access-accounts.js"></script>
</body>
</html>